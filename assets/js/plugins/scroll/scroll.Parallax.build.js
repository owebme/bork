!function(t,i,s,o){function e(t){n.call(this),this._options=o.extend(this.defaults,t||{}),this._clock=new this._options.clock,this._target=this._options.target,this.setRange(this._options.start,this._options.end),this.setDirection(this._options.direction),this._emitter=this._target,this._scrollChanged=!0,this._position=null,this._progress=0,this._emitter.on("scroll update",this._onScroll.bind(this)),this._clock.on("update",this._onUpdate.bind(this),this),this._clock.on("draw",this._onDraw.bind(this),this),this._clock.start()}t.define("plugins.scroll.ScrollTracker");var n=t.commons.EventEmitter,r=t.commons.clock,l=e.prototype=Object.create(n.prototype);l.defaults={start:0,end:0,direction:"Y",clock:r,target:s.window},l.getRangeStart=function(){return this._rangeStart},l.setRangeStart=function(t){this._rangeStart=t,this._updateProgress()},l.getRangeEnd=function(){return this._rangeEnd},l.setRangeEnd=function(t){this._rangeEnd=t,this._updateProgress()},l.setRange=function(t,i){this._rangeStart=t,this._rangeEnd=i,this._updateProgress()},l.getDirection=function(){return this._direction},l.setDirection=function(t){this._direction=t.toUpperCase(),this._direction="X"===this._direction?"X":"Y",this._scrollChanged=!0},l.getPosition=function(){return this._position},l.getProgress=function(){return this._progress},l._updateProgress=function(){this._rangeStart===this._rangeEnd?this._progress=0:this._progress=(this._position-this._rangeStart)/(this._rangeEnd-this._rangeStart)},l._boundByRange=function(t){return this._rangeStart||this._rangeEnd?Math.min(Math.max(t,this._rangeStart),this._rangeEnd):t},l._targetScrollPosition=function(){var t;return this._target[0].getPosition?t=this._target[0].getPosition():"function"==typeof(t="X"===this._direction?this._target[0].scrollX||this._target[0].scrollTop:this._target[0].scrollY||this._target[0].scrollTop)&&(t=t()),t||(t=0),t},l._updateScrollData=function(t){var i,s=this._lastTime||0;return t=o.clone(t),t.delta=t.time-s,t.position=this._boundByRange(this._targetScrollPosition()),i=null===this._position?t.position:this._position,t.positionDelta=t.position-i,t.lastPosition=i,this._position=t.position,this._lastTime=t.time,this._eventData=t},l._onScroll=function(t){this._scrollChanged=!0},l._onUpdate=function(t){var i=null===this._position;this._scrollChanged&&(this._updateScrollData(t),i||this._eventData.positionDelta?(this._updateProgress(),this._eventData.progress=this._progress,this.trigger("update",this._eventData)):this._scrollChanged=!1)},l._onDraw=function(t){this._scrollChanged&&(this._scrollChanged=!1,this.trigger("draw",this._eventData),this._eventData=null)},t.plugins.scroll.ScrollTracker=e}(app,$,app.$dom,app.utils),function(t,i,s,o){function e(t){n.call(this,t),this._poolSize=this._options.poolSize,this._pool=[],this._targetPosition=null}t.define("plugins.scroll.PooledScrollTracker");var n=t.plugins.scroll.ScrollTracker,r=e.prototype=Object.create(n.prototype);r.defaults.poolSize=20,r._updateScrollData=function(t){return t=n.prototype._updateScrollData.call(this,t),t.target={position:this._position,lastPosition:null===this._targetPosition?this._position:this._targetPosition,positionDelta:this._position-this._targetPosition},this._targetPosition=this._position,this._pushPoolData(t),this._eventData=o.clone(t),this._position=this._eventData.position=Math.round(this._eventData.position),this._eventData},r._pushPoolData=function(t){this._pool.push(t),this._poolSize&&this._pool.length>this._poolSize&&this._pool.shift()},t.plugins.scroll.PooledScrollTracker=e}(app,$,app.$dom,app.utils),function(t,i,s,o){function e(t){n.call(this,t),this._sampleTime=this._options.sampleTime}t.define("plugins.scroll.SmoothScrollTracker");var n=t.plugins.scroll.PooledScrollTracker,r=e.prototype=Object.create(n.prototype);r.defaults.sampleTime=100,r.smoothing=!1,r._updateScrollData=function(t){return t=n.prototype._updateScrollData.call(this,t),this.smoothing=t.position!==t.target.position,this._position},r._pushPoolData=function(t){var i,s,o=this._sampleTime,e=0,r=0;if(n.prototype._pushPoolData.call(this,t),t.positionDelta){for(r=t.delta,s=this._pool.length-2;s>=0&&(i=this._pool[s],r>o&&(r=o),e+=i.position*r,o-=r,r=i.delta,0!==o);s--);o>0&&(e+=i.position*o,o=0),e+=t.position*(this._sampleTime/3),e/=4*this._sampleTime/3,Math.abs(Math.round(e)-Math.round(t.lastPosition))<2&&(e=t.position>t.lastPosition?Math.min(t.position,e+1):Math.max(t.position,e-1)),t.position=e,t.positionDelta=t.position-t.lastPosition,this._position=t.position}},r._onUpdate=function(t){this.smoothing&&(this._scrollChanged=!0),n.prototype._onUpdate.call(this,t)},t.plugins.scroll.SmoothScrollTracker=e}(app,$,app.$dom,app.utils),function(t,i,s,o){function e(t,i){l.call(this),this.el=o.isElement(t)?t:t[0],this._options=o.extend(this.defaults,i||{}),this._options.tracker?this.tracker=this._options.tracker:this._options.smooth?this.tracker=new r(o.pick(i,"target","start","end","direction")):this.tracker=new n(o.pick(i,"target","start","end","direction")),this.updateRange(),this.tracker.on("update",this._onUpdate.bind(this),this),this.tracker.on("draw",this._onDraw.bind(this),this),a.on("resize orientationchange",this.updateRange.bind(this))}t.define("plugins.scroll.ElementScrollTracker");var n=t.plugins.scroll.ScrollTracker,r=t.plugins.scroll.SmoothScrollTracker,l=t.commons.EventEmitter,a=s.window,h=t.dom,p=e.prototype=Object.create(l.prototype);p.defaults={startThreshold:0,endThreshold:0,startOffset:0,endOffset:0,smooth:!1},p.updateRange=function(t){var i,s,e,n,r,l=h.getPagePosition(this.el);this._options=o.extend(this._options,t||{}),this._startThreshold=this._options.startThreshold,this._endThreshold=this._options.endThreshold,this._startOffset=this._options.startOffset,this._endOffset=this._options.endOffset,"X"===this.tracker.getDirection()?(i=a.width(),s=l.left,e=l.right):(i=a.height(),s=l.top,e=l.bottom),n=s-this._startThreshold*i+this._startOffset,(r=e-this._endThreshold*i+this._endOffset)>n?this.tracker.setRange(n,r):this.tracker.setRange(r,n)},p.getRangeStart=function(){return this.tracker.getRangeStart()},p.getRangeEnd=function(){return this.tracker.getRangeEnd()},p.getDirection=function(){this.tracker.getDirection()},p.setDirection=function(t){this.tracker.setDirection(t)},p.getProgress=function(){return this.tracker.getProgress()},p.getPosition=function(){return this.tracker.getPosition()},p._onUpdate=function(t){this.trigger("update",t)},p._onDraw=function(t){this.trigger("draw",t)},t.plugins.scroll.ElementScrollTracker=e}(app,$,app.$dom,app.utils),function(t,i,s,o){t.define("plugins.scroll.ParallaxElement");var e=t.dom.styles,n=t.commons.clip,r=t.plugins.scroll.ElementScrollTracker,l=t.device.isChrome,a=function(t,i,s,e,l){var a,h;e=o.extend(this.defaultClipOptions,e),l=o.extend(this.defaultScrollOptions,l),this.el=t,this._translateMultiplier=1,l.el?(a=l.el,l.el=null):a=this.el,this._scrollTracker=e.scrollTracker||new r(a,l),h=o.clone(e.propsFrom),e.clock=this._scrollTracker,e.onDraw=this._draw.bind(this),this._units=e.units,this._target=h,this._propsTo=i,this._propsOff=s,this._clipOptions=e,this._clip=new n(h,1,i,e),this.start()},h=a.prototype;h.defaultClipOptions={ease:"linear",units:{}},h.defaultScrollOptions={smooth:!0,startThreshold:1},h.start=function(){this._clip=new n(this._target,1,this._propsTo,this._clipOptions),this._scrollTracker.on("update",this._update.bind(this),this),this._update()},h.stop=function(){this._scrollTracker.off("update",this._update.bind(this),this)},h.reset=function(){this.stop(),this._clip=new n(this._target,1,this._propsOff,this._clipOptions),this._clip.setProgress(1)},h._update=function(t){var i=t?t.progress:this._scrollTracker.getProgress();this._clip.setCurrentTime(i)},h._draw=function(t){var i,s=o.clone(t.target);this._lastDrawData=t,s.translateY&&(s.translateY=s.translateY*this._translateMultiplier),s.translateX&&(s.translateX=s.translateX*this._translateMultiplier);for(i in this._units)i in s&&(s[i]+=this._units[i]);s.translateZ=s.translateZ||0,l&&this._clipOptions.hasOwnProperty("z")&&!1===this._clipOptions.z&&(s.translateZ=null),e.setStyle(this.el,s)},h.setTranslateMultiplier=function(t){this._translateMultiplier=t||1,this._lastDrawData&&this._draw(this._lastDrawData)},t.plugins.scroll.ParallaxElement=a}(app,$,app.$dom,app.utils),function(t,i,s,o){t.define("plugins.scroll.ParallaxController");var e=s.window,n=t.plugins.scroll.ParallaxElement,r=function(i){this.options=i||{},t.device.isMobile||(this.els=[],this._multiplierEls=[],this.container=this.options.container?this.options.container&&o.isElement(this.options.container)?this.options.container:this.options.container[0]:document,this.options.items.forEach(this._initializeElement.bind(this)),this._translateMultiplier=1,this._updateTranslateMultiplier(),this.scroll=this.options.scroll||s.window,e.on("resize orientationchange",this._updateTranslateMultiplier.bind(this)))},l=r.prototype;l._updateTranslateMultiplier=function(){var t,i=e.width()<=1068?.65:1;if(e.width()<=735)this.reset();else if(!this._translateMultiplier||this._translateMultiplier!==i)for(this._translateMultiplier=i,t=this._multiplierEls.length-1;t>=0;t--)this._multiplierEls[t].setTranslateMultiplier(i)},l._initializeElement=function(t){var i,s,e,r;(t.selector||t.elem)&&(t.selector?i=this.container.querySelector(t.selector):t.elem&&(i=o.isElement(t.elem)?t.elem:t.elem[0]),i&&(s=t.clipOptions||{},e=t.scrollOptions||t.clockOptions||{},!s.propsTo&&"to"in t&&(s.propsTo={translateY:t.to},s.propsFrom={translateY:t.from||0},s.propsOff={translateY:t.off||0},s.units={translateY:"px"},t.hasOwnProperty("z")&&(s.z=t.z)),t.scrollTracker&&(s.scrollTracker=t.scrollTracker),this.options.scroll&&!e.target&&(e.target=this.options.scroll),function(o){setTimeout(function(){r=new n(i,s.propsTo,s.propsOff,s,e),o.els.push(r),!1!==t.useMediumMultiplier&&o._multiplierEls.push(r)},0)}(this)))},l.start=function(){if(!t.device.isMobile){var i;for(i=0;i<this.els.length;i++)this.els[i].start()}},l.stop=function(){var t;for(t=0;t<this.els.length;t++)this.els[t].stop()},l.reset=function(){var t;for(t=0;t<this.els.length;t++)this.els[t].reset()},l.destroy=function(){this.stop()},t.plugins.scroll.ParallaxController=r}(app,$,app.$dom,app.utils);